<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ç¥ç€ä¸¶å·</title>
  
  <subtitle>ä¸‹é›¨å’Œæ’¸ç æ›´é…~</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="https://yechuanjie.github.io/blog/"/>
  <updated>2024-06-28T10:05:01.730Z</updated>
  <id>https://yechuanjie.github.io/blog/</id>
  
  <author>
    <name>Ye ChuanJie</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>react-cli</title>
    <link href="https://yechuanjie.github.io/blog//react-cli/"/>
    <id>https://yechuanjie.github.io/blog//react-cli/</id>
    <published>2020-07-13T09:44:03.000Z</published>
    <updated>2024-06-28T10:05:01.730Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ‰ <code>react</code> ç§»åŠ¨ç«¯å¼€å‘è„šæ‰‹æ¶ï¼ŒæŠ€æœ¯æ ˆ <code>react</code> + <code>antd-moblie</code> + <code>typescript</code> + <code>react-router</code> + <code>redux</code></p><a id="more"></a><p>è¯¥è„šæ‰‹æ¶åŸºäº <a href="https://www.html.cn/create-react-app/" target="_blank" rel="noopener">Create React App</a> åˆ›å»ºï¼Œæ–¹ä¾¿å¿«é€Ÿæ­å»º react ç§»åŠ¨ç«¯é¡¹ç›®ã€‚<a href="https://github.com/Yechuanjie/react-cli" target="_blank" rel="noopener">ä»“åº“åœ°å€</a> &amp;&amp; <a href="https://yechuanjie.github.io/react-cli/index">é¡¹ç›®åœ°å€ï¼ˆè¯·åœ¨ç§»åŠ¨ç«¯æŸ¥çœ‹ï¼‰</a></p><h3 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a><span id="top">ç›®å½•</span></h3><p><a href="#ts">âœ… TypeScript å¼€å‘è¯­è¨€</a></p><p><a href="#redux">âœ… redux çŠ¶æ€ç®¡ç†</a></p><p><a href="#router">âœ… react-router è·¯ç”±ç®¡ç†</a></p><p><a href="#axios">âœ… axios å°è£…åŠæ¥å£ç®¡ç†</a></p><p><a href="#mock">âœ… æœ¬åœ° mock server æ”¯æŒ</a></p><p><a href="#proxy">âœ… æœ¬åœ°è·¨åŸŸé…ç½®</a></p><p><a href="#eslint">âœ… esint + prettier ç»Ÿä¸€å¼€å‘è§„èŒƒ</a></p><p><a href="#webpack">âœ… æ”¯æŒè‡ªå®šä¹‰ webpack é…ç½®</a></p><p><a href="#rem">âœ… rem é€‚é…æ–¹æ¡ˆ </a></p><p><a href="#antd">âœ… antd-moblie ç»„ä»¶æŒ‰éœ€åŠ è½½</a></p><p><a href="#alias">âœ… é…ç½® alias åˆ«å</a></p><p><a href="#analyze">âœ… é…ç½®æ‰“åŒ…åˆ†æ</a></p><p><a href="#env">âœ… é…ç½®å¤šç¯å¢ƒå˜é‡</a></p><h4 id="âœ…-TypeScript-å¼€å‘è¯­è¨€"><a href="#âœ…-TypeScript-å¼€å‘è¯­è¨€" class="headerlink" title="âœ… TypeScript å¼€å‘è¯­è¨€"></a><span id="ts">âœ… TypeScript å¼€å‘è¯­è¨€</span></h4><p><code>TypeScript</code> æ˜¯ <code>JavaScript</code> ç±»å‹çš„è¶…é›†ï¼Œå®ƒå¯ä»¥ç¼–è¯‘æˆçº¯ <code>JavaScript</code>ã€‚å®ƒçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯æ”¯æŒå¼ºç±»å‹å’Œ <a href="http://es6.ruanyifeng.com/#docs/class" target="_blank" rel="noopener">ES6 Class</a></p><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-redux-çŠ¶æ€ç®¡ç†"><a href="#âœ…-redux-çŠ¶æ€ç®¡ç†" class="headerlink" title="âœ… redux  çŠ¶æ€ç®¡ç†"></a><span id="redux">âœ… redux  çŠ¶æ€ç®¡ç†</span></h4><p>ç›®å½•ç»“æ„</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€store</span><br><span class="line">â”‚  â”‚ index.ts</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â”œâ”€actions</span><br><span class="line">â”‚  â”‚   user.ts</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â””â”€reducers</span><br><span class="line">â”‚      index.ts</span><br><span class="line">â”‚      user.ts</span><br></pre></td></tr></table></figure><p>æ‹†åˆ† reducer</p><p><code>store/index</code> ä¸­ <code>combineReducers()</code> æ–¹æ³•å°†å¤šä¸ªå°çš„ reducer ç»„åˆæˆä¸€ä¸ª rootReducerï¼Œè€Œæ¯ä¸ªå°çš„ reducer åªå…³å¿ƒè‡ªå·±è´Ÿè´£çš„ <code>action.type</code></p><p><code>src/index.tsx</code> ä¸­å¼•å…¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">      &lt;App /&gt;</span><br><span class="line">    &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>React.StrictMode&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useSelector, useDispatch &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="keyword">import</span> &#123; setAppUserInfo &#125; <span class="keyword">from</span> <span class="string">'@/store/actions/user'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> userInfo = useSelector(<span class="function">(<span class="params">state: PageStateProps</span>) =&gt;</span> state.user)</span><br><span class="line">  <span class="keyword">const</span> dispath = useDispatch()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> updateInfo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    dispath(</span><br><span class="line">      setAppUserInfo(&#123;</span><br><span class="line">        userId: <span class="string">'413'</span>,</span><br><span class="line">        nickName: <span class="string">'developer'</span>,</span><br><span class="line">        sex: <span class="number">1</span></span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"page"</span>&gt;</span><br><span class="line">      &lt;div onClick=&#123;updateInfo&#125;&gt;</span><br><span class="line">        &lt;Logo&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Logo</span>&gt;</span></span></span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div className="welcome"&gt;hello &#123;userInfo.nickName&#125;!&lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-react-router-è·¯ç”±ç®¡ç†"><a href="#âœ…-react-router-è·¯ç”±ç®¡ç†" class="headerlink" title=" âœ… react-router è·¯ç”±ç®¡ç†"></a><span id="router"> âœ… react-router è·¯ç”±ç®¡ç†</span></h4><p>æœ¬é¡¹ç›®é‡‡ç”¨ <code>history</code> æ¨¡å¼ï¼Œå¦‚éœ€ä½¿ç”¨ <code>hash</code> æ¨¡å¼ï¼Œè¯·ä½¿ç”¨ <code>HashRouter</code> æ›¿æ¢ <code>BrowserRouter</code></p><p><code>basename</code> å±æ€§å¯ä»¥æ ¹æ®é¡¹ç›®è·¯å¾„æ¥ä¿®æ”¹ï¼Œä¾‹å¦‚æœ¬é¡¹ç›®åœ°å€ä¸ºï¼š<a href="http://yechuanjie.github.io/react-cli">http://yechuanjie.github.io/react-cli</a>ï¼Œåˆ™ <code>basename=&quot;/react-cli&quot;</code>ï¼Œè‹¥ä¸éœ€è¦å­è·¯å¾„ï¼Œåˆ™é»˜è®¤<code>basename = &#39;/&#39;</code></p><p><code>src/router/routes.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; lazy &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">const</span> Index = lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/pages/index'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> routes: RouteConfig[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/index'</span>,</span><br><span class="line">    component: Index,</span><br><span class="line">    exact: <span class="literal">true</span>,</span><br><span class="line">    routes: []</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><code>src/router/index.tsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Suspense &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; BrowserRouter, Route, Redirect, Switch &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">'./routes'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> RouterView = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;BrowserRouter basename=<span class="string">"/react-cli"</span>&gt;</span><br><span class="line">    &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½ä¸­&lt;<span class="regexp">/div&gt;&#125;&gt;</span></span><br><span class="line"><span class="regexp">      &lt;Switch&gt;</span></span><br><span class="line"><span class="regexp">        &#123;routes.map(route =&gt; (</span></span><br><span class="line"><span class="regexp">          &lt;Route key=&#123;route.path&#125; path=&#123;route.path&#125; component=&#123;route.component&#125; exact=&#123;route.exact&#125;&gt;&lt;/</span>Route&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">        &lt;Redirect to=<span class="string">"/index"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Redirect</span>&gt;</span></span></span><br><span class="line">      &lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Suspense&gt;</span><br><span class="line">  &lt;<span class="regexp">/BrowserRouter&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp">export default RouterView</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>lazy</code> + <code>Suspense</code> çš„æ–¹å¼å®ç°è·¯ç”±æ‡’åŠ è½½ä»¥åŠç»„ä»¶å¼‚æ­¥åŠ è½½</p><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-axios-å°è£…åŠæ¥å£ç®¡ç†"><a href="#âœ…-axios-å°è£…åŠæ¥å£ç®¡ç†" class="headerlink" title="âœ… axios å°è£…åŠæ¥å£ç®¡ç†"></a><span id="axios">âœ… axios å°è£…åŠæ¥å£ç®¡ç†</span></h4><p>å°† <code>axios</code> è¯·æ±‚è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œç»Ÿä¸€è¯·æ±‚æ–¹å¼ã€å®ç°å…¬å…±å‚æ•°é…ç½®ã€å®ç°ç»Ÿä¸€çš„é”™è¯¯æ‹¦æˆªå¤„ç†ï¼Œå¹¶è¿”å›ä¸åç«¯ç»Ÿä¸€çš„ <code>Promise&lt;ResponseType&gt;</code> å¯¹è±¡</p><p><code>request</code> å°è£… ï¼Œ<code>src/api/request.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios, &#123; AxiosRequestConfig, Method &#125; <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> envConfig <span class="keyword">from</span> <span class="string">'@/config'</span></span><br><span class="line"><span class="comment">// æ¥å£è¿”å›ç±»å‹ (æ ¹æ®åç«¯è¿”å›çš„æ ¼å¼å®šä¹‰)</span></span><br><span class="line"><span class="keyword">interface</span> ResponseType &#123;</span><br><span class="line">  data: <span class="built_in">any</span></span><br><span class="line">  msg: <span class="built_in">string</span></span><br><span class="line">  code: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">url: <span class="built_in">string</span>, method: Method, data?: &#123;&#125;, loading?: <span class="built_in">boolean</span></span>): <span class="title">Promise</span>&lt;<span class="title">ResponseType</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">// è¯·æ±‚å…¬å…±å‚æ•°é…ç½®</span></span><br><span class="line">  <span class="keyword">const</span> publicParams = &#123;</span><br><span class="line">    env: envConfig.ENV_TYPE,</span><br><span class="line">    mockType: <span class="number">1</span>,</span><br><span class="line">    source: <span class="string">'h5'</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// åˆå¹¶å…¬å…±å‚æ•°</span></span><br><span class="line">  data = <span class="built_in">Object</span>.assign(&#123;&#125;, data, publicParams)</span><br><span class="line">  <span class="keyword">const</span> options: AxiosRequestConfig = &#123;</span><br><span class="line">    url,</span><br><span class="line">    method,</span><br><span class="line">    params: method.toUpperCase() === <span class="string">'GET'</span> || method.toUpperCase() === <span class="string">'DELETE'</span> ? data : <span class="literal">null</span>,</span><br><span class="line">    data: method.toUpperCase() === <span class="string">'POST'</span> || method.toUpperCase() === <span class="string">'PUT'</span> ? data : <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> AxiosInstance = initAxios(loading)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    AxiosInstance(options)</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> data = res.data <span class="keyword">as</span> ResponseType</span><br><span class="line">        <span class="comment">// è¿™é‡Œå¯ä»¥æ·»åŠ å’Œåå°çš„ status çº¦å®š</span></span><br><span class="line">        <span class="comment">// if (data.code !== 200) &#123;</span></span><br><span class="line">        <span class="comment">//   Toast.info(data.msg)</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£ç®¡ç† <code>src/api/index.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'./request'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getList = <span class="function">(<span class="params">params: &#123; <span class="keyword">type</span>: <span class="built_in">number</span> &#125;</span>) =&gt;</span> request(<span class="string">'/api/getInfo'</span>, <span class="string">'GET'</span>, &#123; ...params &#125;, <span class="literal">true</span>)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å°è£…çš„<code>request</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> API <span class="keyword">from</span> <span class="string">'@/api/index'</span></span><br><span class="line"><span class="keyword">const</span> updateInfo = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">// get è¯·æ±‚</span></span><br><span class="line">  <span class="keyword">const</span> list = <span class="keyword">await</span> API.getList(&#123; <span class="keyword">type</span>: <span class="number">1</span> &#125;)</span><br><span class="line">  <span class="built_in">console</span>.info(list) <span class="comment">// è¯·æ±‚ç»“æœå°±æ˜¯å°è£…åçš„ Promise&lt;ResponseType&gt; ç±»å‹</span></span><br><span class="line">  <span class="comment">// å¯¹äºæ¥å£è¿”å›çš„æ•°æ®æ ¼å¼ï¼Œå¯ä»¥ç»Ÿä¸€åœ¨global.d.tsé‡Œå®šä¹‰interfaceï¼Œå‡è®¾ä½ å·²ç»å®šä¹‰äº† interface ListDetail, ç„¶åå¦‚ä¸‹ä½¿ç”¨</span></span><br><span class="line">  <span class="keyword">const</span> data = list.data <span class="keyword">as</span> ListDetail <span class="comment">// æ–­è¨€dataç±»å‹ï¼Œåç»­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨å®šä¹‰å¥½çš„æ•°æ®ç»“æ„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-æœ¬åœ°-mock-server-æ”¯æŒ"><a href="#âœ…-æœ¬åœ°-mock-server-æ”¯æŒ" class="headerlink" title="âœ… æœ¬åœ° mock server æ”¯æŒ"></a><span id="mock">âœ… æœ¬åœ° mock server æ”¯æŒ</span></h4><p><code>src/mock</code> å®ç°äº†æœ¬åœ° <code>mock server</code> å¼€å‘ã€‚</p><p>æ³¨æ„ï¼š <code>nodejs</code> ç¯å¢ƒä¸‹é»˜è®¤ä¸æ”¯æŒ <code>esModules</code>ï¼Œå°†<code>src/mock</code>ä¸‹çš„æ–‡ä»¶ï¼Œä¿®æ”¹ä¸º<code>.mjs</code>åç¼€ï¼ŒåŒæ—¶åœ¨<code>package.json</code> çš„<code>scripts</code>ä¸­æ–°å¢<code>experimental-modules</code>å‘½ä»¤ä½¿å…¶å¯ä»¥ä½¿ç”¨<code>esModules</code></p><p><code>package.json</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scripts: &#123;</span><br><span class="line">  "mock": "node --experimental-modules src/mock/server.mjs"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ¬é¡¹ç›®ä½¿ç”¨ <code>express</code> ä½œä¸ºæœåŠ¡å™¨å¼€å‘</p><p><code>src/mock/server.mjs</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">'express'</span></span><br><span class="line"><span class="keyword">import</span> mockData <span class="keyword">from</span> <span class="string">'./mock.mjs'</span></span><br><span class="line"><span class="keyword">import</span> bodyParser <span class="keyword">from</span> <span class="string">'body-parser'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="comment">// body-parser è§£æjsonæ ¼å¼æ•°æ®</span></span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = express.Router()</span><br><span class="line"></span><br><span class="line">router.use(<span class="string">'/'</span>, mockData)</span><br><span class="line">app.use(<span class="string">'/api'</span>, router)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3001</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Example app listening on port 3001!'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>mock æ•°æ®æ ¹æ®éœ€æ±‚åœ¨<code>src/mock/mock.mjs</code>ä¸­è‡ªå®šä¹‰ä¿®æ”¹ï¼Œæ›´å¤š mock ä½¿ç”¨æ–¹å¼å¯ä»¥æŸ¥çœ‹<a href="%5Bhttp://mockjs.com/examples.html%5D(http://mockjs.com/examples.html">mock å®˜æ–¹ç¤ºä¾‹</a>&gt;)ã€‚</p><p><code>src/mock/mock.mjs</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">'mockjs'</span></span><br><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">'express'</span></span><br><span class="line"><span class="keyword">const</span> router = express.Router()</span><br><span class="line"><span class="comment">// getç±»å‹æ¥å£  /api/getInfo è·å–åˆ—è¡¨</span></span><br><span class="line">router.get(<span class="string">'/getInfo'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.info(req.query.type)</span><br><span class="line">  <span class="keyword">const</span> data = Mock.mock(&#123;</span><br><span class="line">    <span class="string">'list|1-8'</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">'name|1'</span>: [<span class="string">'John'</span>, <span class="string">'Jessen'</span>, <span class="string">'Mark'</span>],</span><br><span class="line">        <span class="string">'desc|1'</span>: [<span class="string">'Hello'</span>, <span class="string">'React-cli'</span>, <span class="string">'Try it!'</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> res.json(&#123;</span><br><span class="line">    data,</span><br><span class="line">    code: <span class="number">200</span>,</span><br><span class="line">    msg: <span class="string">''</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¼€å¯æœ¬åœ° <code>mock</code> æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn mock</span><br></pre></td></tr></table></figure><p>æœ¬åœ°å¼€å¯ <code>mock</code> æœåŠ¡åï¼Œæ‰€æœ‰æœ¬åœ° <code>api</code> è¯·æ±‚éƒ½ä¼šå¯¼è‡´<strong>è·¨åŸŸé—®é¢˜</strong>ï¼Œè¯·å‚è€ƒ<a href="#proxy">âœ… æœ¬åœ°è·¨åŸŸé…ç½®</a></p><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-æœ¬åœ°è·¨åŸŸé…ç½®"><a href="#âœ…-æœ¬åœ°è·¨åŸŸé…ç½®" class="headerlink" title="âœ… æœ¬åœ°è·¨åŸŸé…ç½®"></a><span id="proxy">âœ… æœ¬åœ°è·¨åŸŸé…ç½®</span></h4><p>ä¸ºè§£å†³æœ¬åœ°æ¥å£è¯·æ±‚è·¨åŸŸï¼Œéœ€è¦ä½¿ç”¨åˆ° <code>http-proxy-middleware</code> ä¸­é—´ä»¶ã€‚åœ¨ src æ ¹ç›®å½•ä¸‹åˆ›å»º<code>setupProxy.js</code>æ–‡ä»¶ï¼Œæ³¨æ„è¿™é‡Œåªèƒ½ä½¿ç”¨ <code>.js</code> åç¼€ï¼Œå› ä¸ºè¯¥ä¸­é—´ä»¶é»˜è®¤è¯»å–çš„æ˜¯ <code>js</code> æ–‡ä»¶</p><p><code>src/setupProxy.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createProxyMiddleware &#125; = <span class="built_in">require</span>(<span class="string">'http-proxy-middleware'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">  app.use(</span><br><span class="line">    createProxyMiddleware(<span class="string">'/api'</span>, &#123;</span><br><span class="line">      <span class="comment">// ä»£ç†æœåŠ¡å™¨åœ°å€</span></span><br><span class="line">      target: <span class="string">'http://localhost:3001'</span>,</span><br><span class="line">      secure: <span class="literal">false</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123;</span><br><span class="line">        <span class="string">'^/api'</span>: <span class="string">'/api'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥æ„‰å¿«çš„åœ¨æœ¬åœ°è¯·æ±‚è‡ªå·±çš„<code>mock</code>æ•°æ®å•¦ï¼</p><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-eslint-prettier-ç»Ÿä¸€å¼€å‘è§„èŒƒ"><a href="#âœ…-eslint-prettier-ç»Ÿä¸€å¼€å‘è§„èŒƒ" class="headerlink" title="âœ… eslint + prettier ç»Ÿä¸€å¼€å‘è§„èŒƒ"></a><span id="eslint">âœ… eslint + prettier ç»Ÿä¸€å¼€å‘è§„èŒƒ</span></h4><p>åœ¨<code>package.json</code>æ–‡ä»¶ä¸­ç¼–å†™è‡ªå®šä¹‰<code>eslint</code>è§„åˆ™</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"eslintConfig"</span>: &#123;</span><br><span class="line">    <span class="attr">"extends"</span>: <span class="string">"react-app"</span>,</span><br><span class="line">    <span class="attr">"rules"</span>: &#123;</span><br><span class="line">      <span class="attr">"import/no-commonjs"</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–å†™ç»Ÿä¸€çš„<code>prettier</code>è§„èŒƒæ–‡ä»¶ <code>.prettierrc</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"singleQuote"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"semi"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"printWidth"</span>: <span class="number">120</span>,</span><br><span class="line">  <span class="attr">"arrowParens"</span>: <span class="string">"avoid"</span>,</span><br><span class="line">  <span class="attr">"bracketSpacing"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"jsxBracketSameLine"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"trailingComma"</span>: <span class="string">"none"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-æ”¯æŒè‡ªå®šä¹‰-webpack-é…ç½®"><a href="#âœ…-æ”¯æŒè‡ªå®šä¹‰-webpack-é…ç½®" class="headerlink" title="âœ… æ”¯æŒè‡ªå®šä¹‰ webpack é…ç½®"></a><span id="webpack">âœ… æ”¯æŒè‡ªå®šä¹‰ webpack é…ç½®</span></h4><p>é€šè¿‡ <code>customize-cra</code> æš´éœ² <code>webpack</code> é…ç½®çš„<code>config-overrides.js</code>æ–‡ä»¶ï¼Œä½¿æˆ‘ä»¬å¯ä»¥ä¸ç”¨ <code>eject</code> çš„æ–¹å¼å°±èƒ½åœ¨è¿™é‡Œè¦†ç›–é‡å†™ <code>webpack</code> é…ç½®ï¼Œç›®å‰å·²æ”¯æŒå‡ åç§ç›¸å…³é…ç½®è‡ªå®šä¹‰ï¼Œå…·ä½“å¯æŸ¥çœ‹<a href="[https://github.com/arackaf/customize-cra/blob/HEAD/api.md](https://github.com/arackaf/customize-cra/blob/HEAD/api.md">customize-cra api docs</a>&gt;)ã€‚</p><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-rem-é€‚é…æ–¹æ¡ˆ"><a href="#âœ…-rem-é€‚é…æ–¹æ¡ˆ" class="headerlink" title="âœ… rem é€‚é…æ–¹æ¡ˆ "></a><span id="rem">âœ… rem é€‚é…æ–¹æ¡ˆ </span></h4><p>é¡¹ç›®å·²ç»é…ç½®å¥½ <code>rem</code> é€‚é…ï¼Œä¸‹é¢ä»…åšä»‹ç»ï¼š</p><p><code>antd-mobile</code> ä¸­çš„æ ·å¼é»˜è®¤ä½¿ç”¨<code>px</code>ä½œä¸ºå•ä½ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨<code>rem</code>å•ä½ï¼Œæ¨èä½¿ç”¨<code>postcss-px2rem</code> æ­é… <code>src/utils/rem.ts</code>ä¸€èµ·ä½¿ç”¨ã€‚å…¶ä¸­ <code>src/utils/rem.ts</code> å®ç°äº†ä¸€ä¸ªæç®€çš„ rem åº“ã€‚</p><p><code>postcss-px2rem</code> æ’ä»¶ä½¿ç”¨</p><ul><li><p>å‡å¦‚è®¾è®¡å›¾ç»™çš„å®½åº¦æ˜¯ 750ï¼ŒremUnit è®¾ç½®ä¸º 75ï¼Œè¿™æ ·æˆ‘ä»¬å†™æ ·å¼æ—¶ï¼Œå¯ä»¥ç›´æ¥æŒ‰ç…§è®¾è®¡å›¾æ ‡æ³¨çš„å®½é«˜æ¥ 1:1 è¿˜åŸå¼€å‘ã€‚</p></li><li><p>PS: å¦‚æœå¼•ç”¨äº†æŸäº›æ²¡æœ‰å…¼å®¹ px2rem ç¬¬ä¸‰æ–¹ UI æ¡†æ¶ï¼Œæœ‰çš„ 1rem = 100pxï¼ˆantd-mobileï¼‰ï¼Œ æœ‰çš„ 1rem = 75px</p></li><li><p>éœ€è¦å°† remUnit çš„å€¼è®¾ç½®ä¸ºåƒç´ å¯¹åº”çš„ä¸€åŠï¼ˆantd-mobile å³ 50ï¼‰ï¼Œå³å¯ä»¥ 1:1 è¿˜åŸç»„ä»¶ï¼Œå¦åˆ™ä¼šæ ·å¼ä¼šæœ‰å˜åŒ–ï¼Œä¾‹å¦‚æŒ‰é’®ä¼šå˜å°ã€‚</p></li></ul><p><code>config-overrides.js</code>ï¼Œä½¿ç”¨<code>addPostcssPlugins</code>è®¾ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; override, addPostcssPlugins &#125; = <span class="built_in">require</span>(<span class="string">'customize-cra'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = override(addPostcssPlugins([<span class="built_in">require</span>(<span class="string">'postcss-px2rem'</span>)(&#123; <span class="attr">remUnit</span>: <span class="number">50</span> &#125;)]))</span><br></pre></td></tr></table></figure><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-antd-moblie-ç»„ä»¶æŒ‰éœ€åŠ è½½"><a href="#âœ…-antd-moblie-ç»„ä»¶æŒ‰éœ€åŠ è½½" class="headerlink" title="âœ… antd-moblie ç»„ä»¶æŒ‰éœ€åŠ è½½"></a><span id="antd">âœ… antd-moblie ç»„ä»¶æŒ‰éœ€åŠ è½½</span></h4><p><a href="https://github.com/ant-design/babel-plugin-import" target="_blank" rel="noopener">babel-plugin-import</a> æ˜¯ä¸€æ¬¾ <code>babel</code> æ’ä»¶ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°† <code>import</code> çš„å†™æ³•è‡ªåŠ¨è½¬æ¢ä¸ºæŒ‰éœ€å¼•å…¥çš„æ–¹å¼ã€‚</p><p>å®‰è£…æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add babel-plugin-import</span><br></pre></td></tr></table></figure><p><code>config-overrides.js</code>ï¼Œä½¿ç”¨<code>fixBabelImports</code>è®¾ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; override, fixBabelImports &#125; = <span class="built_in">require</span>(<span class="string">'customize-cra'</span>)</span><br><span class="line"><span class="comment">// å¼•ç”¨ antd åè®¾ç½®æŒ‰éœ€å¼•å…¥åï¼Œåœ¨æ‰“åŒ…çš„æ—¶å€™ä¼šç”Ÿæˆå¾ˆå¤š .map æ–‡ä»¶</span></span><br><span class="line">process.env.GENERATE_SOURCEMAP = <span class="string">'false'</span></span><br><span class="line"><span class="built_in">module</span>.exports = override(</span><br><span class="line">  <span class="comment">/* æŒ‰éœ€å¼•å…¥antd-mobile */</span></span><br><span class="line">  fixBabelImports(<span class="string">'import'</span>, &#123;</span><br><span class="line">    libraryName: <span class="string">'antd-mobile'</span>,</span><br><span class="line">    style: <span class="string">'css'</span></span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-é…ç½®-alias-åˆ«å"><a href="#âœ…-é…ç½®-alias-åˆ«å" class="headerlink" title="âœ… é…ç½® alias åˆ«å"></a><span id="alias">âœ… é…ç½® alias åˆ«å</span></h4><p><code>config-overrides.js</code>ï¼Œä½¿ç”¨<code>addWebpackAlias</code>è®¾ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; override, addWebpackAlias &#125; = <span class="built_in">require</span>(<span class="string">'customize-cra'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> resolve = <span class="function"><span class="params">dir</span> =&gt;</span> path.join(__dirname, dir)</span><br><span class="line"><span class="built_in">module</span>.exports = override(</span><br><span class="line">  addWebpackAlias(&#123;</span><br><span class="line">    <span class="string">'@/'</span>: resolve(<span class="string">'src'</span>),</span><br><span class="line">    <span class="string">'@/pages'</span>: resolve(<span class="string">'./src/pages'</span>),</span><br><span class="line">    <span class="string">'@/api'</span>: resolve(<span class="string">'./src/api'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h4><p>æ ¹ç›®å½•çš„ <code>tsconfig.json</code> æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦è®¾ç½®åˆ«åçš„æ”¯æŒï¼Œå¦åˆ™ ts ä¼šæç¤ºæ— æ³•è¯†åˆ«åˆ«å</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"baseUrl"</span>: <span class="string">"src"</span>,</span><br><span class="line">    <span class="attr">"paths"</span>: &#123;</span><br><span class="line">      <span class="attr">"@/*"</span>: [<span class="string">"*"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Tips:</code> æ¨èä½¿ç”¨ <code>vscode</code> å¼€å‘ï¼Œå®‰è£… <code>path-intellisense</code>æ’ä»¶, å¹¶åœ¨ <code>setting.json</code> ä¸­è®¾ç½®åˆ«åæ˜ å°„ï¼Œå°±èƒ½åœ¨ä½¿ç”¨åˆ«åæ—¶æç¤ºæ–‡ä»¶è·¯å¾„</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"path-intellisense.mappings": &#123;</span><br><span class="line">  "@": "\$&#123;workspaceRoot&#125;/src"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-é…ç½®æ‰“åŒ…åˆ†æ"><a href="#âœ…-é…ç½®æ‰“åŒ…åˆ†æ" class="headerlink" title="âœ… é…ç½®æ‰“åŒ…åˆ†æ"></a><span id="analyze">âœ… é…ç½®æ‰“åŒ…åˆ†æ</span></h4><p>webpack-bundle-analyzer æ˜¯ä¸€æ¬¾åˆ†æä»£ç å¤§å°çš„æ’ä»¶</p><p>é¦–å…ˆå®‰è£…å®ƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpack-bundle-analyzer</span><br></pre></td></tr></table></figure><p>åœ¨ <code>config-overrides.js</code> ä¸­ï¼Œä½¿ç”¨ <code>addWebpackPlugin</code> è®¾ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; BundleAnalyzerPlugin &#125; = <span class="built_in">require</span>(<span class="string">'webpack-bundle-analyzer'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; override, addWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'customize-cra'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> analyze = process.env.REACT_APP_ENV === <span class="string">'development'</span> <span class="comment">//æ˜¯å¦åˆ†ææ‰“åŒ…æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = override(</span><br><span class="line">  analyze</span><br><span class="line">    ? addWebpackPlugin(</span><br><span class="line">        <span class="keyword">new</span> BundleAnalyzerPlugin(&#123;</span><br><span class="line">          analyzerMode: <span class="string">'static'</span> <span class="comment">//è¾“å‡ºé™æ€æŠ¥å‘Šæ–‡ä»¶report.htmlï¼Œè€Œä¸æ˜¯å¯åŠ¨ä¸€ä¸ªwebæœåŠ¡</span></span><br><span class="line">        &#125;)</span><br><span class="line">      )</span><br><span class="line">    : <span class="literal">undefined</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p><h4 id="âœ…-é…ç½®å¤šç¯å¢ƒå˜é‡"><a href="#âœ…-é…ç½®å¤šç¯å¢ƒå˜é‡" class="headerlink" title="âœ… é…ç½®å¤šç¯å¢ƒå˜é‡ "></a><span id="env">âœ… é…ç½®å¤šç¯å¢ƒå˜é‡ </span></h4><p><code>package.json</code> é‡Œçš„ <code>scripts</code> é…ç½® <code>build:dev</code> <code>build:sta</code> <code>build:pro</code>æ¥æ‰§è¡Œä¸åŒç¯å¢ƒ</p><ul><li><code>yarn start</code> å¯åŠ¨æœ¬åœ° , é»˜è®¤æ‰§è¡Œ <code>development</code></li><li><code>yarn build:dev</code> æ‰“åŒ…æµ‹è¯•ç¯å¢ƒ , æ‰§è¡Œ <code>development</code></li><li><code>yarn build:sta</code> æ‰“åŒ…é¢„å‘å¸ƒç¯å¢ƒ , æ‰§è¡Œ <code>staging</code></li><li><code>yarn build:pro</code> æ‰“åŒ…æ­£å¼ç¯å¢ƒ , æ‰§è¡Œ <code>production</code></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "start": "react-app-rewired start",</span><br><span class="line">  "build:dev": "dotenv -e .env.development react-app-rewired build",</span><br><span class="line">  "build:sta": "dotenv -e .env.staging react-app-rewired build",</span><br><span class="line">  "build:pro": "dotenv -e .env.production react-app-rewired build"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="é…ç½®è¯¦æƒ…"><a href="#é…ç½®è¯¦æƒ…" class="headerlink" title="é…ç½®è¯¦æƒ…"></a>é…ç½®è¯¦æƒ…</h5><p>åœ¨ <strong>æ ¹ç›®å½•</strong> ä¸‹åˆ›å»ºä¸åŒçš„ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œå¦‚ <code>.env.development</code> ï¼Œ<code>.env.staging</code>ï¼Œ <code>.env.production</code>ï¼Œå°±å¦‚ä½ æ‰€çœ‹åˆ°çš„ <code>scripts</code> ï¼Œé€šè¿‡ <code>dotenv</code> å¯ä»¥æŒ‡å®šä¸åŒçš„ç¯å¢ƒå˜é‡æ–‡ä»¶ã€‚</p><p>åœ¨ä»£ç ä¸­å¯ä»¥é€šè¿‡ <code>process.env.REACT_APP_ENV</code> è®¿é—®æ‰€åœ¨çš„ç¯å¢ƒå˜é‡ã€‚é™¤äº† <code>REACT_APP_*</code> å˜é‡ä¹‹å¤–ï¼Œåœ¨ä½ çš„åº”ç”¨ä»£ç ä¸­å§‹ç»ˆå¯ç”¨çš„è¿˜æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„å˜é‡<code>NODE_ENV</code> å’Œ<code>BASE_URL</code></p><ul><li><strong>.env.development</strong></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># æµ‹è¯•ç¯å¢ƒ</span><br><span class="line"># must start with REACT_APP_</span><br><span class="line">REACT_APP_ENV = <span class="string">'development'</span></span><br></pre></td></tr></table></figure><ul><li><strong>.env.staging</strong></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># é¢„å‘å¸ƒç¯å¢ƒ</span><br><span class="line"># must start with REACT_APP_</span><br><span class="line">REACT_APP_ENV = <span class="string">'staging'</span></span><br></pre></td></tr></table></figure><ul><li><strong>.env.production</strong></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># æ­£å¼ç¯å¢ƒ</span><br><span class="line"># must start with REACT_APP_</span><br><span class="line">REACT_APP_ENV = <span class="string">'production'</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬å¹¶æ²¡æœ‰å®šä¹‰å…¨éƒ¨ç¯å¢ƒå˜é‡ï¼Œåªå®šä¹‰äº†åŸºç¡€çš„ç¯å¢ƒç±»å‹ REACT_APP_ENV <code>development</code>ï¼Œ<code>staging</code>ï¼Œ <code>production</code> ã€‚å˜é‡æˆ‘ä»¬ç»Ÿä¸€åœ¨ <code>src/config/env.*.ts</code> é‡Œè¿›è¡Œç®¡ç†</p><p><code>question:</code> ä¸ºä»€ä¹ˆè¦åœ¨ <code>config</code> ä¸­æ–°å»ºä¸‰ä¸ªæ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç›´æ¥å†™åœ¨ç¯å¢ƒå˜é‡æ–‡ä»¶é‡Œå‘¢ï¼Ÿ</p><ul><li><p><strong>ä¿®æ”¹å˜é‡æ–¹ä¾¿ï¼Œæ— éœ€é‡æ–°å¯åŠ¨é¡¹ç›®</strong></p></li><li><p><strong>å¼•å…¥æ–¹å¼æ›´ç¬¦åˆæ¨¡å—åŒ–æ ‡å‡†</strong></p></li></ul><p>config/index.ts</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®buildå‘½ä»¤æŒ‡å®šçš„ç¯å¢ƒï¼Œå¼•å…¥ä¸åŒé…ç½®</span></span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'./env.'</span> + process.env.REACT_APP_ENV)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> config.default</span><br></pre></td></tr></table></figure><p>æ¯ç§ç¯å¢ƒå•ç‹¬å»é…ç½®å…¬å…±å˜é‡ï¼Œä»¥æµ‹è¯•ç¯å¢ƒé…ç½®ä¸ºä¾‹</p><p><code>config/.env.development.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•ç¯å¢ƒé…ç½®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  ENV_TYPE: <span class="string">'æµ‹è¯•ç¯å¢ƒ'</span>,</span><br><span class="line">  BASE_URL: <span class="string">'//test.xxx.com'</span> <span class="comment">// apiè¯·æ±‚åœ°å€</span></span><br><span class="line">  OTHER_GLOBAL_VAR: <span class="string">'xxx'</span> <span class="comment">// å¯æ·»åŠ è‡ªå®šä¹‰çš„å…¬å…±å˜é‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ®ç¯å¢ƒå˜é‡ä¸åŒï¼Œ<code>config</code> é…ç½®å°±ä¼šä¸åŒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> config <span class="keyword">from</span> <span class="string">'@/config'</span></span><br><span class="line"><span class="built_in">console</span>.info(config)</span><br><span class="line"><span class="comment">// config</span></span><br><span class="line">&#123;</span><br><span class="line">  ENV_TYPE: <span class="string">'æµ‹è¯•ç¯å¢ƒ'</span>,</span><br><span class="line">  BASE_URL: <span class="string">'//test.xxx.com'</span></span><br><span class="line">  OTHER_GLOBAL_VAR: <span class="string">'xxx'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="#top">â–²  å›é¡¶éƒ¨</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸ‰ &lt;code&gt;react&lt;/code&gt; ç§»åŠ¨ç«¯å¼€å‘è„šæ‰‹æ¶ï¼ŒæŠ€æœ¯æ ˆ &lt;code&gt;react&lt;/code&gt; + &lt;code&gt;antd-moblie&lt;/code&gt; + &lt;code&gt;typescript&lt;/code&gt; + &lt;code&gt;react-router&lt;/code&gt; + &lt;code&gt;redux&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨lottie-webåˆ¶ä½œé«˜æ€§èƒ½åŠ¨ç”»</title>
    <link href="https://yechuanjie.github.io/blog//lottie/"/>
    <id>https://yechuanjie.github.io/blog//lottie/</id>
    <published>2019-07-31T12:35:32.000Z</published>
    <updated>2024-06-28T10:05:01.730Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸŒ¾ <code>Lottie</code> æ˜¯ä¸€ä¸ªåº“ï¼Œç”¨äºè§£æä½¿ç”¨ <a href="https://www.adobe.com/cn/products/aftereffects.html" target="_blank" rel="noopener">AE</a> åˆ¶ä½œçš„åŠ¨ç”»ï¼ˆåŠ¨ç”»éœ€è¦é€šè¿‡ AE ä¸­çš„ bodymovin æ’ä»¶å°†å…¶å¯¼å‡ºä¸º json æ•°æ®æ ¼å¼ï¼‰ï¼Œæ”¯æŒ<code>web</code>ã€<code>ios</code>ã€<code>android</code> å’Œ <code>react native</code>ã€‚</p><a id="more"></a><p>æƒ³æå‰çœ‹ä¸‹æ•ˆæœçš„å°ä¼™ä¼´è¯·çœ‹<a href="https://yechuanjie.github.io/lottie_demo">è¿™é‡Œ~</a></p><h3 id="Lottie-ç®€ä»‹"><a href="#Lottie-ç®€ä»‹" class="headerlink" title="Lottie ç®€ä»‹"></a>Lottie ç®€ä»‹</h3><p><a href="http://airbnb.io/lottie/" target="_blank" rel="noopener">Lottie å®˜ç½‘</a></p><blockquote><p> è¿™é‡Œä¸»è¦ä»‹ç» Lottie çš„ web ç‰ˆæœ¬ <strong>lottie-web</strong> åº“ï¼Œå®ƒå¯ä»¥è§£æå¯¼å‡ºçš„åŠ¨ç”» json æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä»¥ svg æˆ–è€… canvas çš„æ–¹å¼å°†åŠ¨ç”»ç»˜åˆ¶åˆ°é¡µé¢ä¸­ã€‚</p></blockquote><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨-Lottie"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨-Lottie" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ Lottie"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ Lottie</h3><p>ç›®å‰å¤šå¸§åŠ¨ç”»ä¸€èˆ¬çš„å®ç°æ–¹å¼æ˜¯ï¼š</p><ul><li>å‰ç«¯å®ç°<code>svgã€canvas</code>åŠ¨ç”»ï¼ˆå®ç°æˆæœ¬è¾ƒé«˜ã€ç»´æŠ¤æˆæœ¬é«˜ï¼‰</li><li>è®¾è®¡å¸ˆåˆ‡<code>gif</code>ï¼ˆæ–‡ä»¶è¾ƒå¤§ã€å®¹æ˜“æœ‰é”¯é½¿ï¼‰</li><li><code>png</code>åºåˆ—å¸§ï¼ˆæ–‡ä»¶è¾ƒå¤§ã€å®¹æ˜“æœ‰é”¯é½¿ï¼‰</li></ul><blockquote><p>ç›®å‰çš„åŠ¨ç”»å®ç°æ–¹æ¡ˆæœ‰ç€å„è‡ªçš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯»æ‰¾ä¸€ç§æ›´åŠ ç®€å•ã€é«˜æ•ˆã€æ€§èƒ½é«˜çš„åŠ¨ç”»æ–¹æ¡ˆã€‚airbnb çš„ Lottie æ˜¯ä¸€å¥—è‰¯å¥½çš„åŠ¨ç”»è§£å†³æ–¹æ¡ˆã€‚</p></blockquote><h3 id="Lottie-çš„ä¼˜åŠ¿"><a href="#Lottie-çš„ä¼˜åŠ¿" class="headerlink" title="Lottie çš„ä¼˜åŠ¿"></a>Lottie çš„ä¼˜åŠ¿</h3><p>Lottie æ–¹æ³•æ–¹æ¡ˆæ˜¯ç”±è®¾è®¡å¸ˆå‡ºåŠ¨ç”»ï¼Œå¯¼å‡ºä¸º jsonï¼Œç»™å‰ç«¯è§£æã€‚æ‰€ä»¥ï¼Œä½¿ç”¨ Lottie æ–¹æ¡ˆçš„å¥½å¤„åœ¨äºï¼š</p><ul><li>åŠ¨ç”»ç”±è®¾è®¡ä½¿ç”¨ä¸“ä¸šçš„åŠ¨ç”»åˆ¶ä½œå·¥å…·<code>Adobe After Effects</code>æ¥å®ç°ï¼Œä½¿åŠ¨ç”»å®ç°æ›´åŠ æ–¹ä¾¿ï¼ŒåŠ¨ç”»æ•ˆæœä¹Ÿæ›´å¥½ï¼›</li><li>å‰ç«¯å¯ä»¥æ–¹ä¾¿çš„è°ƒç”¨åŠ¨ç”»ï¼Œå¹¶å¯¹åŠ¨ç”»è¿›è¡Œæ§åˆ¶ï¼Œå‡å°‘å‰ç«¯åŠ¨ç”»å·¥ä½œé‡ï¼›</li><li>è®¾è®¡åˆ¶ä½œåŠ¨ç”»ï¼Œå‰ç«¯å±•ç°åŠ¨ç”»ï¼Œä¸“ä¸šäººåšä¸“ä¸šäº‹ï¼Œåˆ†å·¥åˆç†ï¼›</li><li>è¿˜åŸç¨‹åº¦ç™¾åˆ†ä¹‹ç™¾ï¼›</li><li>ä½¿ç”¨ lottie æ–¹æ¡ˆï¼Œjson æ–‡ä»¶å¤§å°ä¼šæ¯” gif æ–‡ä»¶å°å¾ˆå¤šï¼Œæ€§èƒ½ä¹Ÿä¼šæ›´å¥½ã€‚</li></ul><h3 id="Lottie-çš„ä¸è¶³"><a href="#Lottie-çš„ä¸è¶³" class="headerlink" title="Lottie çš„ä¸è¶³"></a>Lottie çš„ä¸è¶³</h3><ul><li>lottie-web æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œlottie.js å¤§å°ä¸º 532kï¼Œè½»é‡ç‰ˆå‹ç¼©åä¹Ÿæœ‰ 150kï¼Œç»è¿‡ gzip åï¼Œå¤§å°ä¸º 43kã€‚</li><li>å¦‚æœè®¾è®¡å¸ˆå»ºäº†å¾ˆå¤šçš„å›¾å±‚ï¼Œå¯èƒ½ä»ç„¶æœ‰ json æ–‡ä»¶è¾ƒå¤§çš„é—®é¢˜ï¼Œéœ€è¦è®¾è®¡å¸ˆéµå¾ªä¸€å®šçš„è®¾è®¡è§„èŒƒã€‚</li></ul><h3 id="lottie-web-ä½¿ç”¨æ–¹å¼"><a href="#lottie-web-ä½¿ç”¨æ–¹å¼" class="headerlink" title="lottie-web ä½¿ç”¨æ–¹å¼"></a>lottie-web ä½¿ç”¨æ–¹å¼</h3><h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><p><code>npm install lottie-web</code> or <code>yarn add lottie-web</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lottie <span class="keyword">from</span> <span class="string">'lottie-web'</span>;</span><br><span class="line"><span class="keyword">import</span> animationData <span class="keyword">from</span> <span class="string">'animationData.json'</span>; <span class="comment">// ä½¿ç”¨æœ¬åœ°èµ„æº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> animation = lottie.loadAnimation(&#123;</span><br><span class="line">  container: element <span class="keyword">as</span> Element, <span class="comment">// the dom element that will contain the animation</span></span><br><span class="line">  renderer: <span class="string">'svg'</span>,</span><br><span class="line">  name: name,</span><br><span class="line">  loop: <span class="literal">true</span>,</span><br><span class="line">  autoplay: <span class="literal">true</span>,</span><br><span class="line">  animationData</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// æ·»åŠ äº‹ä»¶</span></span><br><span class="line">animation.addEventListener(<span class="string">'enterFrame'</span>, <span class="function"><span class="params">i</span> =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>loadAnimation</code>å‚æ•°å®šä¹‰ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> AnimationConfig = &#123;</span><br><span class="line">  container: Element; <span class="comment">//åŠ¨ç”»å®¹å™¨</span></span><br><span class="line">  renderer?: <span class="string">'svg'</span> | <span class="string">'canvas'</span> | <span class="string">'html'</span>; <span class="comment">//æ¸²æŸ“æ–¹å¼</span></span><br><span class="line">  loop?: <span class="built_in">boolean</span> | <span class="built_in">number</span>; <span class="comment">//å¾ªç¯</span></span><br><span class="line">  autoplay?: <span class="built_in">boolean</span>; <span class="comment">//è‡ªåŠ¨æ’­æ”¾</span></span><br><span class="line">  name?: <span class="built_in">string</span>; <span class="comment">//åŠ¨ç”»åå­—</span></span><br><span class="line">  rendererSettings?:</span><br><span class="line">    | SVGRendererConfig</span><br><span class="line">    | CanvasRendererConfig</span><br><span class="line">    | HTMLRendererConfig; <span class="comment">// æ¸²æŸ“è®¾ç½®</span></span><br><span class="line">  path?: <span class="built_in">string</span>; <span class="comment">// åŠ¨ç”»jsonè·¯å¾„</span></span><br><span class="line">  animationData?: <span class="built_in">any</span>; <span class="comment">//æœ¬åœ°åŠ¨ç”»jsonæ•°æ®</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–å®Œæˆåï¼Œå¯ä»¥å¯¹<code>animation</code>å¯¹è±¡æ·»åŠ äº‹ä»¶ä»¥åŠå¯¹åŠ¨ç”»è¿›è¡Œæ§åˆ¶</p><h4 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h4><p><code>è°ƒç”¨æ–¹å¼</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">animation.addEventeListener(<span class="string">'event'</span>, info =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(info);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><table><thead><tr><th>äº‹ä»¶å</th><th>æè¿°</th></tr></thead><tbody><tr><td>enterFrame</td><td>æ’­æ”¾æ¯ä¸€å¸§åŠ¨ç”»çš„æ—¶å€™è§¦å‘</td></tr><tr><td>loopComplete</td><td>å½“å‰å¾ªç¯æ’­æ”¾å®Œæˆè§¦å‘</td></tr><tr><td>complete</td><td>åŠ¨ç”»æ’­æ”¾å®Œæˆè§¦å‘</td></tr><tr><td>segmentStart</td><td>å¼€å§‹æ’­æ”¾ä¸€ä¸ªåŠ¨ç”»ç‰‡æ®µçš„æ—¶å€™è§¦å‘</td></tr><tr><td>destroy</td><td>åŠ¨ç”»é”€æ¯æ—¶è§¦å‘</td></tr></tbody></table><h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><p><code>è°ƒç”¨æ–¹å¼</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">animation.play();</span><br><span class="line">animation.setSpeed(<span class="number">1.5</span>);</span><br></pre></td></tr></table></figure><table><thead><tr><th>æ–¹æ³•å</th><th>å‚æ•°åŠè¿”å›ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>play</td><td>(): void</td><td>æ’­æ”¾</td></tr><tr><td>stop</td><td>(): void</td><td>åœæ­¢å¹¶å›åˆ°ç¬¬ 0 å¸§</td></tr><tr><td>pause</td><td>(): void</td><td>æš‚åœ</td></tr><tr><td>setLocationHref</td><td>(href: string): void</td><td>è®¾ç½®æœ¬åœ°èµ„æºè·¯å¾„</td></tr><tr><td>setSpeed</td><td>(speed: number): void</td><td>è®¾ç½®åŠ¨ç”»æ’­æ”¾é€Ÿé€Ÿ</td></tr><tr><td>goToAndPlay</td><td>(value: number, isFrame?: boolean): void</td><td>å‰è¿›åˆ°ä¼ å…¥å¸§å¹¶ç»§ç»­æ’­æ”¾</td></tr><tr><td>goToAndStop</td><td>(value: number, isFrame?: boolean): void</td><td>å‰è¿›åˆ°ä¼ å…¥å¸§å¹¶åœæ­¢æ’­æ”¾</td></tr><tr><td>setDirection</td><td>(direction: AnimationDirection): void</td><td>è®¾ç½®åŠ¨ç”»æ–¹å‘</td></tr><tr><td>playSegments</td><td>(segments: [], forceFlag?: boolean): void</td><td>æ’­æ”¾æŒ‡å®šå¸§æ•°ç»„çš„åŠ¨ç”»;</td></tr><tr><td>destroy</td><td>(): void</td><td>ä¸»åŠ¨é”€æ¯åŠ¨ç”»</td></tr><tr><td>getDuration</td><td>(inFrames?: boolean): number</td><td>è·å–åŠ¨ç”»æ—¶é•¿ï¼Œå¯æŒ‰å¸§æˆ–æŒ‰ç§’è¿”å›</td></tr></tbody></table><h3 id="ä½¿ç”¨å…¨çƒè®¾è®¡å¸ˆåˆ†äº«çš„åŠ¨ç”»"><a href="#ä½¿ç”¨å…¨çƒè®¾è®¡å¸ˆåˆ†äº«çš„åŠ¨ç”»" class="headerlink" title="ä½¿ç”¨å…¨çƒè®¾è®¡å¸ˆåˆ†äº«çš„åŠ¨ç”»"></a>ä½¿ç”¨å…¨çƒè®¾è®¡å¸ˆåˆ†äº«çš„åŠ¨ç”»</h3><blockquote><p>æˆ‘ä»¬å¯ä»¥åœ¨ <a href="https://lottiefiles.com/" target="_blank" rel="noopener">lottiefiles</a> ä¸Šçœ‹åˆ°æ¥è‡ªå…¨çƒä¼˜ç§€è®¾è®¡å¸ˆä»¬åˆ†äº«çš„åŠ¨ç”»ï¼Œå¹¶ååˆ†ç®€å•çš„ä½¿ç”¨å®ƒã€‚</p></blockquote><h3 id="ä½¿ç”¨æ¡ˆä¾‹"><a href="#ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="ä½¿ç”¨æ¡ˆä¾‹"></a>ä½¿ç”¨æ¡ˆä¾‹</h3><h4 id="åŠ è½½è¿œç¨‹-json-æ–‡ä»¶"><a href="#åŠ è½½è¿œç¨‹-json-æ–‡ä»¶" class="headerlink" title="åŠ è½½è¿œç¨‹ json æ–‡ä»¶"></a>åŠ è½½è¿œç¨‹ json æ–‡ä»¶</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source =</span><br><span class="line">  <span class="string">'https://assets1.lottiefiles.com/datafiles/AembVTvov5PkTSJ/data.json'</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŠ è½½è¿œç¨‹jsonæ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; sourceurl</span></span><br><span class="line"><span class="comment"> * @returns è¿”å›jsonå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> loadResource = <span class="keyword">async</span> (sourceurl: <span class="built_in">string</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(sourceurl);</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> response.json();</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;;</span><br><span class="line">loadResource(<span class="built_in">String</span>(source)).then(<span class="function"><span class="params">json</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åŠ è½½å®Œæˆååˆå§‹åŒ–</span></span><br><span class="line">  <span class="keyword">const</span> animation = lottie.loadAnimation(&#123;</span><br><span class="line">    container: element <span class="keyword">as</span> Element, <span class="comment">// the dom element that will contain the animation</span></span><br><span class="line">    renderer: <span class="string">'svg'</span>,</span><br><span class="line">    name: name,</span><br><span class="line">    loop: <span class="literal">true</span>,</span><br><span class="line">    autoplay: <span class="literal">true</span>,</span><br><span class="line">    animationData: json,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>###<a href="https://yechuanjie.github.io/lottie_demo">ç‚¹å‡»æŸ¥çœ‹demo</a></p><p>###<a href="https://github.com/Yechuanjie/lottie_demo" target="_blank" rel="noopener">github</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸŒ¾ &lt;code&gt;Lottie&lt;/code&gt; æ˜¯ä¸€ä¸ªåº“ï¼Œç”¨äºè§£æä½¿ç”¨ &lt;a href=&quot;https://www.adobe.com/cn/products/aftereffects.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;AE&lt;/a&gt; åˆ¶ä½œçš„åŠ¨ç”»ï¼ˆåŠ¨ç”»éœ€è¦é€šè¿‡ AE ä¸­çš„ bodymovin æ’ä»¶å°†å…¶å¯¼å‡ºä¸º json æ•°æ®æ ¼å¼ï¼‰ï¼Œæ”¯æŒ&lt;code&gt;web&lt;/code&gt;ã€&lt;code&gt;ios&lt;/code&gt;ã€&lt;code&gt;android&lt;/code&gt; å’Œ &lt;code&gt;react native&lt;/code&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="https://yechuanjie.github.io/blog/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="https://yechuanjie.github.io/blog/tags/JavaScript/"/>
    
      <category term="åŠ¨ç”»" scheme="https://yechuanjie.github.io/blog/tags/%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>Taroåˆæ¢</title>
    <link href="https://yechuanjie.github.io/blog//Taro/"/>
    <id>https://yechuanjie.github.io/blog//Taro/</id>
    <published>2019-02-21T13:18:11.000Z</published>
    <updated>2024-06-28T10:05:01.730Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ‘½ <code>Taro</code> [â€˜tÉ‘:roÊŠ]ï¼Œæ³°ç½—Â·å¥¥ç‰¹æ›¼ï¼Œå®‡å®™è­¦å¤‡é˜Ÿæ€»æ•™å®˜ï¼Œå®åŠ›æœ€å¼ºçš„å¥¥ç‰¹æ›¼ã€‚å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ï¼Œæ”¯æŒç”¨ React çš„å¼€å‘æ–¹å¼ç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œç”Ÿæˆèƒ½è¿è¡Œåœ¨ <code>å°ç¨‹åºç«¯</code>ã€<code>H5</code>ã€<code>React Native</code> ç­‰å„å¹³å°çš„åº”ç”¨ã€‚</p><a id="more"></a><h3 id="JSX-ç¯‡"><a href="#JSX-ç¯‡" class="headerlink" title="JSX ç¯‡"></a>JSX ç¯‡</h3><h4 id="jsx-æ”¯æŒæƒ…å†µ"><a href="#jsx-æ”¯æŒæƒ…å†µ" class="headerlink" title="jsx æ”¯æŒæƒ…å†µ"></a>jsx æ”¯æŒæƒ…å†µ</h4><ul><li>ä¸èƒ½ä½¿ç”¨ <strong>Array#map</strong> ä¹‹å¤–çš„æ–¹æ³•æ“ä½œ JSX æ•°ç»„</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">numbers.forEach(<span class="function">(<span class="params">numbers</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Taroä¸­è¿™é‡Œå¿…é¡»ç”¨map</span></span><br><span class="line">  <span class="keyword">if</span> (someCase) &#123;</span><br><span class="line">    <span class="keyword">return</span> &lt;View /&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>ä¸èƒ½åœ¨ JSX å‚æ•°ä¸­ä½¿ç”¨<strong>åŒ¿åå‡½æ•°</strong></li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;View</span><br><span class="line">  onClick=&#123;() =&gt; &#123;</span><br><span class="line">    <span class="keyword">this</span>.openPic;</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;&lt;/View&gt;</span><br></pre></td></tr></table></figure><ul><li>æš‚ä¸æ”¯æŒåœ¨ render() ä¹‹å¤–çš„æ–¹æ³•å®šä¹‰ JSX<br>å‡è®¾ç°åœ¨é¡µé¢ä¸­æœ‰ä¸€ä¸ªéŸ³ä¹ç»„ä»¶ï¼Œä¸èƒ½è¿™æ ·ä½¿ç”¨</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> music = <span class="built_in">require</span>(<span class="string">'../assets/music.mp3'</span>);</span><br><span class="line"><span class="keyword">const</span> loop = <span class="literal">true</span>;</span><br><span class="line">musicComponent = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Audio src=&#123;music&#125; loop=&#123;loop&#125; /&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &#123;<span class="keyword">this</span>.musicComponent()&#125;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸èƒ½åœ¨ JSX å‚æ•°ä¸­ä½¿ç”¨å¯¹è±¡å±•å¼€ç¬¦</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;View &#123;...this.props&#125; /&gt;</span><br></pre></td></tr></table></figure><ul><li><p>ä¸æ”¯æŒæ— çŠ¶æ€ç»„ä»¶</p><p>ç”±äºå¾®ä¿¡çš„ template èƒ½åŠ›æœ‰é™ï¼Œä¸æ”¯æŒåŠ¨æ€ä¼ å€¼å’Œå‡½æ•°ï¼ŒTaro æš‚æ—¶åªæ”¯æŒä¸€ä¸ªæ–‡ä»¶åªå®šä¹‰ä¸€ä¸ªç»„ä»¶ã€‚ä¸ºäº†é¿å…å¼€å‘è€…ç–‘æƒ‘ï¼Œæš‚æ—¶ä¸æ”¯æŒå®šä¹‰<strong>æ— çŠ¶æ€ç»„ä»¶</strong>ã€‚</p></li></ul><h4 id="æ‰€æœ‰å…ƒç´ ç»„ä»¶åŒ–"><a href="#æ‰€æœ‰å…ƒç´ ç»„ä»¶åŒ–" class="headerlink" title="æ‰€æœ‰å…ƒç´ ç»„ä»¶åŒ–"></a>æ‰€æœ‰å…ƒç´ ç»„ä»¶åŒ–</h4><ul><li><p>ä¸èƒ½ä½¿ç”¨ html æ ‡ç­¾ï¼Œæ‰€æœ‰æ ‡ç­¾ä»¥<strong>ç»„ä»¶</strong>å½¢å¼ä¹¦å†™ã€‚Taro å®ç°äº†ä»¥å¾®ä¿¡å°ç¨‹åºç»„ä»¶åº“ä¸ºæ ‡å‡†ï¼Œç»“åˆ jsx è¯­æ³•è§„èŒƒï¼Œå®šåˆ¶äº†ä¸€å¥—<a href="https://nervjs.github.io/taro/docs/components-desc.html" target="_blank" rel="noopener">ç»„ä»¶åº“</a>ï¼Œåœ¨ä¸åŒçš„ç«¯ä¸Šï¼Œä¼šä½¿ç”¨ä¸åŒç«¯çš„å¯¹åº”ç»„ä»¶ã€‚</p></li><li><p>ç»„ä»¶åä¸èƒ½å’Œé¡µé¢åç›¸åŒã€‚</p></li></ul><hr><h3 id="é…ç½®ç¯‡"><a href="#é…ç½®ç¯‡" class="headerlink" title="é…ç½®ç¯‡"></a>é…ç½®ç¯‡</h3><h4 id="é¡¹ç›®é…ç½®"><a href="#é¡¹ç›®é…ç½®" class="headerlink" title="é¡¹ç›®é…ç½®"></a>é¡¹ç›®é…ç½®</h4><p>é¡¹ç›®åˆå§‹åä¼šé»˜è®¤è‡ªå¸¦å¾®ä¿¡å°ç¨‹åºçš„é…ç½®æ–‡ä»¶<strong>project.config.js</strong>ã€‚<br>æ‰“åŒ…æˆå…¶ä»–å¹³å°å°ç¨‹åºå‰ï¼Œéœ€è¦å¯¹åº”åœ¨æ ¹ç›®å½•æ·»åŠ å¯¹åº”é…ç½®æ–‡ä»¶ï¼Œå¦åˆ™è¿è¡ŒæŠ¥é”™ã€‚</p><ul><li>å¾®ä¿¡å°ç¨‹åºï¼Œ<a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html?search-key=%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">project.config.json</a></li><li>ç™¾åº¦æ™ºèƒ½å°ç¨‹åºï¼Œ<a href="https://smartprogram.baidu.com/docs/develop/devtools/projectconfig/" target="_blank" rel="noopener">project.swan.json</a></li><li>å¤´æ¡å°ç¨‹åºï¼Œproject.tt.jsonï¼Œæ–‡æ¡£æš‚æ— ï¼Œå¤§éƒ¨åˆ†å­—æ®µä¸å¾®ä¿¡å°ç¨‹åºä¸€è‡´</li><li>æ”¯ä»˜å®å°ç¨‹åºï¼Œæ— </li></ul><hr><h3 id="æ ·å¼ç¯‡"><a href="#æ ·å¼ç¯‡" class="headerlink" title="æ ·å¼ç¯‡"></a>æ ·å¼ç¯‡</h3><h4 id="å…¼å®¹é—®é¢˜"><a href="#å…¼å®¹é—®é¢˜" class="headerlink" title="å…¼å®¹é—®é¢˜"></a>å…¼å®¹é—®é¢˜</h4><p>å¦‚æœåªéœ€è¦å…¼å®¹<strong>å°ç¨‹åº</strong>ä»¥åŠ<strong>h5 ç«¯</strong>ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰ css å±æ€§éƒ½èƒ½ä½¿ç”¨ã€‚</p><p>å¦‚æœè¦æ”¯æŒ <strong>React Native</strong> ç«¯ï¼Œå¿…é¡»é‡‡ç”¨ <strong>Flex</strong> å¸ƒå±€ï¼Œå¹¶ä¸”æ ·å¼é€‰æ‹©å™¨ä»…æ”¯æŒ<strong>ç±»é€‰æ‹©å™¨</strong>ï¼Œä¸”ä¸æ”¯æŒ <strong>ç»„åˆé€‰æ‹©å™¨</strong>ã€‚ä»¥ä¸‹å†™æ³•éƒ½æ˜¯ä¸æ”¯æŒçš„</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.button</span><span class="selector-class">.button_theme_islands</span> &#123;</span><br><span class="line">  <span class="attribute">font-style</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span> + <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font-style</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span> ~ <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &gt; <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: DodgerBlue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: DodgerBlue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>React Native ç«¯æ”¯æŒçš„ css å±æ€§è¾ƒå°‘ï¼Œæ¯”å¦‚ä¸æ”¯æŒ<strong>background-image</strong>ï¼Œåªèƒ½ä½¿ç”¨<strong>Image</strong>ç»„ä»¶ï¼Œé…åˆ Flex å¸ƒå±€æ¥å®ç°ã€‚<strong>box-shadow</strong>ä¸æ”¯æŒï¼Œposition åªæ”¯æŒ<strong>absolute</strong>å’Œ<strong>relative</strong>ã€‚ æ›´å¤šå±æ€§ï¼Œè§è¯¦ç»†çš„<a href="https://reactnative.cn/docs/layout-props/" target="_blank" rel="noopener">css å±æ€§åˆ—è¡¨</a>ã€‚</p><h4 id="ç¼–è¯‘æˆ-React-Native"><a href="#ç¼–è¯‘æˆ-React-Native" class="headerlink" title="ç¼–è¯‘æˆ React-Native"></a>ç¼–è¯‘æˆ React-Native</h4><p>ä¸€ä¸ªç®€å•çš„æŒ‰é’®ï¼Œcss æ ·å¼å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.back</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">500px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.back_btn</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">background</span>: cadetblue;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">70px</span>;</span><br><span class="line">  <span class="attribute">color</span>: aliceblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ä¹‹å</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; StyleSheet &#125; <span class="keyword">from</span> <span class="string">"react-native"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> StyleSheet.create(&#123;</span><br><span class="line">  back: &#123;</span><br><span class="line">    width: <span class="string">"100%"</span>,</span><br><span class="line">    marginTop: <span class="number">250</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  back_btn: &#123;</span><br><span class="line">    width: <span class="number">150</span>,</span><br><span class="line">    height: <span class="number">50</span>,</span><br><span class="line">    textAlign: <span class="string">"center"</span>,</span><br><span class="line">    lineHeight: <span class="number">50</span>,</span><br><span class="line">    fontSize: <span class="number">25</span>,</span><br><span class="line">    marginTop: <span class="number">0</span>,</span><br><span class="line">    marginRight: <span class="string">"auto"</span>,</span><br><span class="line">    marginBottom: <span class="number">0</span>,</span><br><span class="line">    marginLeft: <span class="string">"auto"</span>,</span><br><span class="line">    backgroundColor: <span class="string">"cadetblue"</span>,</span><br><span class="line">    borderRadius: <span class="number">35</span>,</span><br><span class="line">    color: <span class="string">"aliceblue"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>React Native ä¸­ï¼Œä¼šä½¿ç”¨ StyleSheet.create æ¥é›†ä¸­å®šä¹‰ç»„ä»¶çš„æ ·å¼ã€‚<a href="https://reactnative.cn/docs/style/" target="_blank" rel="noopener">äº†è§£æ›´å¤š</a></p><h4 id="CSS-å•ä½"><a href="#CSS-å•ä½" class="headerlink" title="CSS å•ä½"></a>CSS å•ä½</h4><p>ä»¥ 750px è®¾è®¡ç¨¿ä¸ºåŸºå‡†ï¼Œcss æ ·å¼ä»¥ px ä¸ºå•ä½ï¼Œå¦‚ 750px è®¾è®¡ç¨¿ï¼Œä¸€ä¸ªæŒ‰é’® 200*100ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">width</span>: 200<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">height</span>: 100<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure><p>è®¾è®¡ç¨¿å°ºå¯¸å¯ä»¥åœ¨ config æ–‡ä»¶ä¸­é…ç½®<strong>designWidth</strong>å’Œ<strong>deviceRatio</strong>å­—æ®µã€‚</p><blockquote><p>Taro ä¼šæ ¹æ®ä¸åŒå¹³å°æ¥ç¼–è¯‘ pxï¼Œå°ç¨‹åºä¸­ px è½¬æ¢æˆ rpxï¼Œh5 ä¸­åˆ™è½¬æ¢æˆ remï¼Œreact-native ä¸­è½¬æ¢æˆ ptã€‚å¦‚æœä¸å¸Œæœ›å•ä½è¢«è½¬æ¢ï¼Œå¯ä»¥é€šè¿‡å†™æˆ Px æˆ– PX æ¥é¿å…ã€‚</p></blockquote><h4 id="é»˜è®¤æ ·å¼"><a href="#é»˜è®¤æ ·å¼" class="headerlink" title="é»˜è®¤æ ·å¼"></a>é»˜è®¤æ ·å¼</h4><p>ä¸€äº›é»˜è®¤ç»„ä»¶å¦‚<strong>button</strong>ã€<strong>image</strong>çš„é»˜è®¤æ ·å¼åœ¨å„ä¸ªå¹³å°ä¸Šä¸ä¸€è‡´ï¼Œå¼€å‘å‰éœ€è¦é‡ç½®æ ·å¼ã€‚</p><h3 id="å®é™…é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜"><a href="#å®é™…é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å®é™…é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜"></a>å®é™…é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜</h3><ul><li><p>h5 ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹ js<br>h5 ç«¯å¯èƒ½ä¼šä½¿ç”¨åˆ°ä¸‰æ–¹ js åº“ï¼Œå¦‚æœåœ¨å°ç¨‹åºç¯å¢ƒä¸­ï¼Œé‡åˆ° windowï¼Œdocument ä¹‹ç±»çš„å˜é‡ï¼Œåˆ™ä¼šå¯¼è‡´é”™è¯¯ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡<strong>Taro.getEnv()</strong>åˆ¤æ–­ç¯å¢ƒåï¼ŒæŒ‰éœ€å¼•å…¥ä¸‰æ–¹åº“</p></li><li><p>audio é—®é¢˜<br>å¾®ä¿¡å°ç¨‹åºä¸­ï¼ŒéŸ³é¢‘ä¼šä»¥<strong>createAudioContext</strong>æ¥å¤„ç†ï¼Œç›¸å…³éŸ³é¢‘çš„æ“ä½œï¼Œä¹Ÿåªèƒ½ä½¿ç”¨<strong>playVoice</strong>ï¼Œ<strong>pauseVoice</strong>ç­‰æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•åœ¨ h5ï¼Œreact native åŠå…¶ä»–éƒ¨åˆ†å°ç¨‹åºä¸­éƒ½æ˜¯ä¸æ”¯æŒçš„ã€‚å› æ­¤åªèƒ½é€šè¿‡ä¸åŒçš„ç¯å¢ƒåšä¸åŒçš„å¤„ç†ã€‚</p></li></ul><p>ä»¥ä¸‹æ˜¯ç‚¹å‡»éŸ³ä¹å›¾æ ‡åï¼Œæ§åˆ¶éŸ³ä¹æš‚åœ/æ’­æ”¾çš„æ–¹æ³•</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">toggleMusic = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    musicStatus: !<span class="keyword">this</span>.state.musicStatus,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">let</span> audio;</span><br><span class="line">  <span class="keyword">if</span> (Taro.getEnv() === <span class="string">'WEAPP'</span>) &#123;</span><br><span class="line">      audio = Taro.createAudioContext(<span class="string">'audio'</span>);</span><br><span class="line">      <span class="keyword">this</span>.state.musicStatus ? Taro.pauseVoice() : Taro.playVoice();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Taro.getEnv() === <span class="string">'WEB'</span>)&#123;</span><br><span class="line">      audio = <span class="built_in">document</span>.querySelector(<span class="string">'audio'</span>);</span><br><span class="line">      <span class="keyword">this</span>.state.musicStatus ? audio.pause() : audio.play();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      audio = ... <span class="comment">//å¯¹åº”å¹³å°è·å–audioå¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">      <span class="keyword">this</span>.state.musicStatus ? audio.pause() : audio.play();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="React-Native-å¹³å°è°ƒè¯•"><a href="#React-Native-å¹³å°è°ƒè¯•" class="headerlink" title="React Native å¹³å°è°ƒè¯•"></a>React Native å¹³å°è°ƒè¯•</h3><p><img src="https://qiniu.image.cq-wnl.com/content/20190228f9a18bfcb9784471ac1e862b71b6cde7.png" alt="chrome"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ€»ä½“æ¥è¯´ï¼ŒTaro çš„å¼€å‘ä½“éªŒè¿˜æ˜¯ä¸é”™çš„ã€‚åœ¨ç¼–è¯‘ä¸åŒå¹³å°çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡é…ç½® config/index.js ä¸­çš„ outputRootï¼Œæ¥è¾¾åˆ°åŒæ—¶ç¼–è¯‘å¤šä¸ªå¹³å°çš„ä»£ç çš„æ•ˆæœã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  outputRoot: <span class="string">`dist/<span class="subst">$&#123;process.env.TARO_ENV&#125;</span>`</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>Taro å¯¹å°ç¨‹åºç«¯çš„å…¼å®¹æ€§åŸºæœ¬ä¸€è‡´ï¼ŒæŒ‰ç…§ Taro è§„èŒƒçš„è¯­æ³•å’Œç»„ä»¶æ¥ä¹¦å†™é¡¹ç›®ï¼ŒåŸºæœ¬èƒ½å®ç°å„ç«¯å°ç¨‹åºä»¥åŠ h5 ç«¯çš„ç»Ÿä¸€å¼€å‘ã€‚react native ç«¯ç”±äºç¯å¢ƒç‰¹æ®Šï¼Œå­˜åœ¨è®¸å¤šç‰¹æ®Šçš„ api æ— æ³•é€šç”¨çš„æƒ…å†µï¼Œåªèƒ½é€šè¿‡è·å–å½“å‰ç¯å¢ƒæ¥åšå…¼å®¹å¤„ç†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸ‘½ &lt;code&gt;Taro&lt;/code&gt; [â€˜tÉ‘:roÊŠ]ï¼Œæ³°ç½—Â·å¥¥ç‰¹æ›¼ï¼Œå®‡å®™è­¦å¤‡é˜Ÿæ€»æ•™å®˜ï¼Œå®åŠ›æœ€å¼ºçš„å¥¥ç‰¹æ›¼ã€‚å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ï¼Œæ”¯æŒç”¨ React çš„å¼€å‘æ–¹å¼ç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œç”Ÿæˆèƒ½è¿è¡Œåœ¨ &lt;code&gt;å°ç¨‹åºç«¯&lt;/code&gt;ã€&lt;code&gt;H5&lt;/code&gt;ã€&lt;code&gt;React Native&lt;/code&gt; ç­‰å„å¹³å°çš„åº”ç”¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="å¤šç«¯ç»Ÿä¸€" scheme="https://yechuanjie.github.io/blog/categories/%E5%A4%9A%E7%AB%AF%E7%BB%9F%E4%B8%80/"/>
    
    
      <category term="Taro" scheme="https://yechuanjie.github.io/blog/tags/Taro/"/>
    
      <category term="React" scheme="https://yechuanjie.github.io/blog/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>å†™ä¸€ä¸ªç®€å•çš„vueåŒå‘æ•°æ®ç»‘å®š</title>
    <link href="https://yechuanjie.github.io/blog//vue_data_binding/"/>
    <id>https://yechuanjie.github.io/blog//vue_data_binding/</id>
    <published>2018-07-24T11:19:30.000Z</published>
    <updated>2024-06-28T10:05:01.730Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸŒ± <code>vue</code> åŒå‘æ•°æ®ç»‘å®šåŸç†ï¼š<code>ç›‘å¬å™¨</code>ã€<code>è§£æå™¨</code>ã€<code>è§‚å¯Ÿè€…</code>ã€‚</p><a id="more"></a><h3 id="MVVMåŒå‘æ•°æ®ç»‘å®šæµç¨‹"><a href="#MVVMåŒå‘æ•°æ®ç»‘å®šæµç¨‹" class="headerlink" title="MVVMåŒå‘æ•°æ®ç»‘å®šæµç¨‹"></a>MVVMåŒå‘æ•°æ®ç»‘å®šæµç¨‹</h3><p><img src="https://yechuanjie-image.oss-cn-beijing.aliyuncs.com/18-7-24/64201803.jpg" alt="MVVMåŒå‘æ•°æ®ç»‘å®šæµç¨‹"></p><h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">v-click</span>=<span class="string">"decrease"</span>&gt;</span> - <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"number"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">v-click</span>=<span class="string">"increment"</span>&gt;</span> + <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-bind</span>=<span class="string">"number"</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://yechuanjie-image.oss-cn-beijing.aliyuncs.com/18-7-24/92465283.jpg" alt="html"></p><h3 id="åˆå§‹åŒ–mvvm"><a href="#åˆå§‹åŒ–mvvm" class="headerlink" title="åˆå§‹åŒ–mvvm"></a>åˆå§‹åŒ–mvvm</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyVue</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>._init(options);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–, ç»§æ‰¿æ‰€æœ‰options</span></span><br><span class="line">MyVue.prototype._init = <span class="function">(<span class="params">options</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(options);</span><br><span class="line">  <span class="keyword">this</span>.$options = options;</span><br><span class="line">  <span class="keyword">this</span>.$el = <span class="built_in">document</span>.querySelector(options.el);</span><br><span class="line">  <span class="keyword">this</span>.$data = options.data;</span><br><span class="line">  <span class="keyword">this</span>.$methods = options.methods;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>._binding = &#123;&#125;; <span class="comment">// _bindingä¿å­˜ç€modelä¸viewçš„æ˜ å°„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯Watcherçš„å®ä¾‹ã€‚å½“modelæ”¹å˜æ—¶ï¼Œä¼šè§¦å‘å…¶ä¸­çš„æŒ‡ä»¤ç±»æ›´æ–°ï¼Œä¿è¯viewä¹Ÿèƒ½å®æ—¶æ›´æ–°</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç›‘å¬å™¨</span></span><br><span class="line">  <span class="keyword">this</span>._observe(<span class="keyword">this</span>.$data);</span><br><span class="line">  <span class="comment">// è§£æå™¨</span></span><br><span class="line">  <span class="keyword">this</span>._compile(<span class="keyword">this</span>.$el);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å®ç°ç›‘å¬å™¨-Observe"><a href="#å®ç°ç›‘å¬å™¨-Observe" class="headerlink" title="å®ç°ç›‘å¬å™¨ Observe"></a>å®ç°ç›‘å¬å™¨ Observe</h3><blockquote><p>Observer éå†æ•°æ®å¯¹è±¡ã€‚<br>å¦‚æœå¯¹æŸä¸ªæ•°æ®èµ‹å€¼ï¼Œä¼šè§¦å‘setterï¼Œå°±èƒ½ç›‘å¬æ•°æ®å˜åŒ–<br>å¦‚æœè·å–æŸä¸ªæ•°æ®ï¼Œä¼šè§¦å‘getter</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">MyVue.prototype._observe = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">let</span> value;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">    <span class="keyword">if</span> (data.hasOwnProperty(key)) &#123;</span><br><span class="line">      <span class="keyword">this</span>._binding[key] = &#123;</span><br><span class="line">          _directives: []</span><br><span class="line">      &#125;</span><br><span class="line">      value = data[key];</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">"object"</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>._observe(value);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">let</span> binding = <span class="keyword">this</span>._binding[key];</span><br><span class="line">      <span class="built_in">Object</span>.defineProperty(data, key, &#123;</span><br><span class="line">        enumerable: <span class="literal">true</span>, <span class="comment">// å¯æšä¸¾</span></span><br><span class="line">        configurable: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¯ä»¥å†å®šä¹‰</span></span><br><span class="line">        get: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">`è·å–<span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">          <span class="keyword">return</span> value;</span><br><span class="line">        &#125;,</span><br><span class="line">        set: <span class="function"><span class="params">newValue</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">`æ›´æ–°<span class="subst">$&#123;newValue&#125;</span>`</span>);</span><br><span class="line">          <span class="keyword">if</span> (value !== newValue) &#123;</span><br><span class="line">            value = newValue;</span><br><span class="line">            binding._directives.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                item.update();</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å®ç°è§£æå™¨-Compile"><a href="#å®ç°è§£æå™¨-Compile" class="headerlink" title="å®ç°è§£æå™¨ Compile"></a>å®ç°è§£æå™¨ Compile</h3><blockquote><p>compileæ–¹æ³•ä¸»è¦åšä»¥ä¸‹äº‹æƒ…ï¼š</p><ol><li>è§£ææ¨¡æ¿æŒ‡ä»¤</li><li>å°†æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢æˆæ•°æ®</li><li>åˆå§‹åŒ–æ¸²æŸ“è§†å›¾å¹¶ä¸”ç»™æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„domç»‘å®šupdateå‡½æ•°</li><li>æ•°æ®å˜åŒ–ï¼Œé€šçŸ¥è§†å›¾æ›´æ–°</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rootä¸ºæ ¹å…ƒç´ </span></span><br><span class="line">MyVue.prototype._compile = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="keyword">let</span> _this = <span class="keyword">this</span>;</span><br><span class="line"> <span class="keyword">let</span> nodes = root.children;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nodes.length; ++i) &#123;</span><br><span class="line">     <span class="keyword">let</span> node = nodes[i];</span><br><span class="line">     <span class="keyword">if</span> (node.children.length) &#123;</span><br><span class="line">        _this._compile(node);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="comment">//è§£ææ¨¡æ¿æŒ‡ä»¤&amp;å°†æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢æˆæ•°æ®</span></span><br><span class="line">     <span class="keyword">if</span> (node.hasAttribute(<span class="string">'v-click'</span>)) &#123;</span><br><span class="line">        node.onclick = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> attrVal = node.getAttribute(<span class="string">'v-click'</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(attrVal);</span><br><span class="line">            <span class="keyword">return</span> _this.$methods[attrVal].bind(_this.$data);</span><br><span class="line">        &#125;)();</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="comment">// ç»‘å®šæ•°æ®æ¨¡å‹</span></span><br><span class="line">     <span class="keyword">if</span> (node.hasAttribute(<span class="string">'v-model'</span>) &amp;&amp; (node.tagName === <span class="string">'INPUT'</span> || node.tagName === <span class="string">'TEXTAREA'</span>)) &#123;</span><br><span class="line">         node.addEventListener(<span class="string">'input'</span>, (<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> attrVal = node.getAttribute(<span class="string">'v-model'</span>);</span><br><span class="line">            _this._binding[attrVal]._directives.push(<span class="keyword">new</span> Watcher(</span><br><span class="line">                <span class="string">'input'</span>,</span><br><span class="line">                node,</span><br><span class="line">                _this,</span><br><span class="line">                attrVal,</span><br><span class="line">                <span class="string">'value'</span></span><br><span class="line">            ))</span><br><span class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                _this.$data[attrVal] = nodes[key].value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)(i));</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span> (node.hasAttribute(<span class="string">'v-bind'</span>)) &#123;</span><br><span class="line">         <span class="keyword">let</span> attrVal = node.getAttribute(<span class="string">'v-bind'</span>);</span><br><span class="line">         _this._binding[attrVal]._directives.push(<span class="keyword">new</span> Watcher(</span><br><span class="line">            <span class="string">'text'</span>,</span><br><span class="line">            node,</span><br><span class="line">            _this,</span><br><span class="line">            attrVal,</span><br><span class="line">            <span class="string">'innerHTML'</span></span><br><span class="line">         ))</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°è§‚å¯Ÿè€…-Watcher"><a href="#å®ç°è§‚å¯Ÿè€…-Watcher" class="headerlink" title="å®ç°è§‚å¯Ÿè€… Watcher"></a>å®ç°è§‚å¯Ÿè€… Watcher</h3><blockquote><p>æ¯æ¬¡æ•°æ®å‘ç”Ÿå˜åŒ– éƒ½ä¼šè§¦å‘Watcherå»æ›´æ–°è§†å›¾</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ç°Watcherç›‘å¬</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; name æŒ‡ä»¤åç§°</span></span><br><span class="line"><span class="comment"> * @param &#123;Element&#125; el æŒ‡ä»¤å¯¹åº”çš„domå…ƒç´ </span></span><br><span class="line"><span class="comment"> * @param &#123;Instance&#125; vm æŒ‡ä»¤æ‰€å±çš„myVueå®ä¾‹</span></span><br><span class="line"><span class="comment"> * @param &#123;any&#125; exp æŒ‡ä»¤å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="comment"> * @param &#123;any&#125; attr ç»‘å®šçš„å±æ€§å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Watcher</span>(<span class="params">name, el, vm, exp, attr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.el = el;</span><br><span class="line">    <span class="keyword">this</span>.vm = vm;</span><br><span class="line">    <span class="keyword">this</span>.exp = exp;</span><br><span class="line">    <span class="keyword">this</span>.attr = attr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.update();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Watcher.prototype.update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.el[<span class="keyword">this</span>.attr] = <span class="keyword">this</span>.vm.$data[<span class="keyword">this</span>.exp]; <span class="comment">// å½“dataå¯¹åº”çš„å€¼(exp)æ”¹å˜æ—¶ï¼Œä¿®æ”¹å½“å‰å…ƒç´ çš„å±æ€§ï¼Œä»¥ä¿è¯domæ›´æ–°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨MyVue"><a href="#è°ƒç”¨MyVue" class="headerlink" title="è°ƒç”¨MyVue"></a>è°ƒç”¨MyVue</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è°ƒç”¨ MyVue</span></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> app = <span class="keyword">new</span> MyVue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">      number: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      increment: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.number++;</span><br><span class="line">      &#125;,</span><br><span class="line">      decrease: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.number--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h3><p><img src="https://yechuanjie-image.oss-cn-beijing.aliyuncs.com/18-7-24/47264916.jpg" alt="æœ€ç»ˆæ•ˆæœ"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol><li>vueæ•°æ®åŒå‘ç»‘å®šæ˜¯é€šè¿‡æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼æ¥å®ç°çš„ã€‚</li><li>Vue2.xç‰ˆæœ¬åŒå‘æ•°æ®ç»‘å®šçš„æ ¸å¿ƒæ˜¯<strong>Object.defineProperty</strong>æ–¹æ³•ï¼ŒåŠ«æŒå¯¹è±¡çš„è®¿é—®å™¨ï¼Œåœ¨å±æ€§å€¼å‘ç”Ÿå˜åŒ–æ—¶æˆ‘ä»¬å¯ä»¥è·å–å˜åŒ–,ä»è€Œè¿›è¡Œè¿›ä¸€æ­¥æ“ä½œã€‚</li><li>é€šè¿‡ç›‘å¬å™¨å’Œè§£æå™¨çš„åä½œï¼Œè§¦å‘Watcheræ›´æ–°è§†å›¾</li></ol><blockquote><p>åœ¨å³å°†åˆ°æ¥çš„Vue3.xä¸­ï¼Œå°†ä¼šä½¿ç”¨ES6çš„<a href="http://es6.ruanyifeng.com/#docs/proxy" target="_blank" rel="noopener">Proxy</a>ä»£æ›¿<strong>Object.defineProperty</strong>ï¼Œå®ƒå¯ä»¥ç›´æ¥åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¸ç®¡æ˜¯æ“ä½œä¾¿åˆ©ç¨‹åº¦è¿˜æ˜¯åº•å±‚åŠŸèƒ½ä¸Šéƒ½è¿œå¼ºäºObject.definePropertyã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸŒ± &lt;code&gt;vue&lt;/code&gt; åŒå‘æ•°æ®ç»‘å®šåŸç†ï¼š&lt;code&gt;ç›‘å¬å™¨&lt;/code&gt;ã€&lt;code&gt;è§£æå™¨&lt;/code&gt;ã€&lt;code&gt;è§‚å¯Ÿè€…&lt;/code&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Vue" scheme="https://yechuanjie.github.io/blog/categories/Vue/"/>
    
    
      <category term="JavaScript" scheme="https://yechuanjie.github.io/blog/tags/JavaScript/"/>
    
      <category term="Vue" scheme="https://yechuanjie.github.io/blog/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>è¯•ç€ä¸ä½¿ç”¨ifè¯­å¥ï¼Ÿ</title>
    <link href="https://yechuanjie.github.io/blog//not_if/"/>
    <id>https://yechuanjie.github.io/blog//not_if/</id>
    <published>2018-04-17T17:09:19.000Z</published>
    <updated>2024-06-28T10:05:01.730Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ’ ä½ æœ‰å°è¯•è¿‡ä¸ç”¨ <code>if</code> è¯­å¥å†™ä»£ç å—ï¼Ÿ</p><a id="more"></a><p>ç”¨ifä¼šå­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿä¸ä¼šã€‚ç›¸åï¼Œ<code>if</code> è¯­å¥èƒ½ååˆ†é«˜æ•ˆçš„åˆ¤æ–­æ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚<br>é‚£è¿™ç¯‡æ–‡ç« è¿˜æœ‰å¿…è¦çœ‹å—ï¼Ÿåˆ«æ€¥ã€‚è¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå«åš<strong>ä»£ç å³æ•°æ®</strong>ã€‚</p><h3 id="è¯•ç€ä¸ä½¿ç”¨if"><a href="#è¯•ç€ä¸ä½¿ç”¨if" class="headerlink" title="è¯•ç€ä¸ä½¿ç”¨if"></a>è¯•ç€ä¸ä½¿ç”¨if</h3><blockquote><p><strong>if</strong>æ˜¯æˆ‘ä»¬å¹³æ—¶ç¼–ç¨‹æœ€å¸¸ç”¨çš„è¯­å¥ä¹‹ä¸€ã€‚ifè¯­å¥çš„æ›¿ä»£å“è¿˜æœ‰<strong>switch</strong>è¯­å¥ã€<strong>ä¸‰ç›®è¿ç®—</strong>ç­‰è¯­å¥ã€‚å®ƒä»¬çš„å®è´¨éƒ½æ˜¯åˆ¤æ–­æ¡ä»¶ä¸ºçœŸæ—¶æ‰§è¡Œä»£ç ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬ä¸ä½¿ç”¨è¿™äº›è¯­å¥å»è§£å†³é—®é¢˜æ—¶çš„æ„ä¹‰ä½•åœ¨å‘¢ï¼Ÿ</p></blockquote><p>å¦‚æœå†™ä»£ç çš„æ—¶å€™ä¸èƒ½ä½¿ç”¨ifï¼Œæˆ‘ä»¬å°±ä¼šå»å¯»æ‰¾å…¶ä»–çš„åŠæ³•æ¥è§£å†³ï¼Œé¦–å…ˆï¼Œè¿™å¯¹äºè‡ªå·±çš„æ€ç»´è½¬æ¢æœ‰å¾ˆå¤§çš„æå‡ï¼Œå…¶æ¬¡ï¼Œå½“ä½ ç”¨å¦å¤–çš„æ–¹æ³•è§£å†³ä¹‹åï¼Œä½ åˆgetåˆ°äº†æ–°çš„æŠ€èƒ½ã€‚</p><!-- ### ä¸ä½¿ç”¨ifåº”è¯¥æ€ä¹ˆåš --><h3 id="ç¤ºä¾‹1ï¼šç»Ÿè®¡æ•°ç»„ä¸­å¶æ•°çš„æ•°é‡"><a href="#ç¤ºä¾‹1ï¼šç»Ÿè®¡æ•°ç»„ä¸­å¶æ•°çš„æ•°é‡" class="headerlink" title="ç¤ºä¾‹1ï¼šç»Ÿè®¡æ•°ç»„ä¸­å¶æ•°çš„æ•°é‡"></a>ç¤ºä¾‹1ï¼šç»Ÿè®¡æ•°ç»„ä¸­å¶æ•°çš„æ•°é‡</h3><blockquote><p>å‡è®¾æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡é‡Œé¢çš„å¶æ•°</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">-6</span>]</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨if"><a href="#ä½¿ç”¨if" class="headerlink" title="ä½¿ç”¨if"></a>ä½¿ç”¨if</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">arr.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(item % <span class="number">2</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(count) <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><h4 id="ä¸ä½¿ç”¨ifï¼ˆæ–¹æ³•ä¸€ï¼‰"><a href="#ä¸ä½¿ç”¨ifï¼ˆæ–¹æ³•ä¸€ï¼‰" class="headerlink" title="ä¸ä½¿ç”¨ifï¼ˆæ–¹æ³•ä¸€ï¼‰"></a>ä¸ä½¿ç”¨ifï¼ˆæ–¹æ³•ä¸€ï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> newArr = arr.filter(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Math</span>.abs(item % <span class="number">2</span>) === <span class="number">0</span> )</span><br><span class="line"><span class="built_in">console</span>.log(newArr.length) <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨filterè¿‡æ»¤æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œè¿”å›æ–°æ•°ç»„çš„é•¿åº¦å³å¯ã€‚</p></blockquote><h4 id="ä¸ä½¿ç”¨ifï¼ˆæ–¹æ³•äºŒï¼‰"><a href="#ä¸ä½¿ç”¨ifï¼ˆæ–¹æ³•äºŒï¼‰" class="headerlink" title="ä¸ä½¿ç”¨ifï¼ˆæ–¹æ³•äºŒï¼‰"></a>ä¸ä½¿ç”¨ifï¼ˆæ–¹æ³•äºŒï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">arr.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> count += <span class="built_in">Math</span>.abs(item % <span class="number">2</span>))</span><br><span class="line"><span class="built_in">console</span>.log(arr.length - count) <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><blockquote><p>åˆ©ç”¨äº†å¶æ•°ç®—æ³•çš„è¿”å›å€¼å§‹ç»ˆä¸º0æˆ–1ï¼Œå¾—åˆ°ä¸æ˜¯å¶æ•°çš„countï¼Œä½¿ç”¨æ•°ç»„é•¿åº¦å‡å»countå³å¯ã€‚</p></blockquote><hr><h3 id="ç¤ºä¾‹äºŒï¼šåˆ¤æ–­æ˜¯å¦æ˜¯å¤å­£"><a href="#ç¤ºä¾‹äºŒï¼šåˆ¤æ–­æ˜¯å¦æ˜¯å¤å­£" class="headerlink" title="ç¤ºä¾‹äºŒï¼šåˆ¤æ–­æ˜¯å¦æ˜¯å¤å­£"></a>ç¤ºä¾‹äºŒï¼šåˆ¤æ–­æ˜¯å¦æ˜¯å¤å­£</h3><blockquote><p>æŒ‡å®šä¸€ä¸ªæœˆä»½ï¼ˆå¦‚ï¼š5ï¼‰ï¼Œåˆ¤æ–­æ˜¯å¦å±äºå¤å­£ï¼ˆ7ï¼Œ8ï¼Œ9æœˆï¼‰ï¼Œæ˜¯åˆ™è¿”å›â€™summerâ€™, å¦åˆ™è¿”å›â€™other_seasonâ€™</p></blockquote><h4 id="ä½¿ç”¨if-1"><a href="#ä½¿ç”¨if-1" class="headerlink" title="ä½¿ç”¨if"></a>ä½¿ç”¨if</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> summerOrOther = <span class="function">(<span class="params">month</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (month &lt;= <span class="number">9</span> &amp;&amp; month &gt;= <span class="number">7</span>) <span class="keyword">return</span> <span class="string">'summer'</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'other_season'</span>;</span><br><span class="line">&#125;</span><br><span class="line">summerOrOther(<span class="number">7</span>); <span class="comment">//summer</span></span><br><span class="line">summerOrOther(<span class="number">10</span>); <span class="comment">//other_season</span></span><br></pre></td></tr></table></figure><h4 id="ä¸ä½¿ç”¨if"><a href="#ä¸ä½¿ç”¨if" class="headerlink" title="ä¸ä½¿ç”¨if"></a>ä¸ä½¿ç”¨if</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> condition = &#123;</span><br><span class="line">    <span class="number">7</span>: <span class="string">'summer'</span>,</span><br><span class="line">    <span class="number">8</span>: <span class="string">'summer'</span>,</span><br><span class="line">    <span class="number">9</span>: <span class="string">'summer'</span>,</span><br><span class="line">    <span class="keyword">default</span>: <span class="string">'other_season'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> summerOrOther = <span class="function"><span class="params">month</span> =&gt;</span> condition[month] || condition[<span class="string">'default'</span>]</span><br><span class="line">summerOrOther(<span class="number">9</span>); <span class="comment">//summer</span></span><br><span class="line">summerOrOther(<span class="number">10</span>); <span class="comment">//other_season</span></span><br></pre></td></tr></table></figure><blockquote><p>è¯¥æ–¹æ³•å¹¶æ²¡æœ‰ä»€ä¹ˆç®€å•ä¹‹å¤„ã€‚ä½†è¿™æ ·å®ç°æ›´èƒ½ä½“ç°â€œä»£ç å³æ•°æ®â€çš„ç†å¿µã€‚ä¸€åˆ‡æ“ä½œéƒ½æ˜¯å¯¹æ•°æ®çš„å¤„ç†ï¼Œæœ€åè¾“å‡ºæ•°æ®ã€‚</p></blockquote><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote><p>è¿™ä¸¤ä¸ªç®€å•ç¤ºä¾‹åªæ˜¯è¯´æ˜if(switch, ä¸‰ç›®è¿ç®—ç¬¦)è¯­å¥å¯ä»¥ç”¨å…¶ä»–æ–¹å¼å®ç°ï¼Œä»…ä¾›å‚è€ƒå’Œå­¦ä¹ ã€‚ä½†ifè¯­å¥ä»ç„¶æ˜¯ä»£ç ä¸­é«˜ä½¿ç”¨ç‡çš„è¯­å¥ï¼Œå»ºè®®æ ¹æ®å®é™…éœ€æ±‚æ¥åˆç†ä½¿ç”¨ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ğŸ’ ä½ æœ‰å°è¯•è¿‡ä¸ç”¨ &lt;code&gt;if&lt;/code&gt; è¯­å¥å†™ä»£ç å—ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="https://yechuanjie.github.io/blog/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="https://yechuanjie.github.io/blog/tags/JavaScript/"/>
    
      <category term="ES6" scheme="https://yechuanjie.github.io/blog/tags/ES6/"/>
    
  </entry>
  
</feed>
